webpackJsonp([1],{"+A8S":function(e,t){},"7Otq":function(e,t,n){e.exports=n.p+"static/img/logo.b022587.png"},"9CX6":function(e,t){},F1FX:function(e,t){},IcPj:function(e,t){},M41f:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a=n("Dd8w"),r=n.n(a),s=n("NYxO"),i={name:"Navigation",props:{navItems:{type:Array,default:[],required:!0}},computed:r()({},Object(s.b)({currentUser:"currentUser"})),created:function(){console.log(this.currentUser)},data:function(){return{query:null,searchPlaceholder:"ï€‚ Search Devos",loggedInNavLinks:[{linkName:"Categories",linkIcon:"navIcon fas fa-map-signs"},{linkName:"Popular",linkIcon:"navIcon fas fa-chart-line"}]}},methods:{submitQuery:function(e){this.query=e.target.value,console.log(this.$router),this.$router.push({name:"SearchResults",params:{query:e.target.value}})}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"navbar"},[e._m(0),e._v(" "),o("router-link",{staticClass:"brand",attrs:{to:{name:"Homepage"}}},[o("img",{attrs:{src:n("7Otq"),alt:""}})]),e._v(" "),o("div",{staticClass:"navSearchBar"},[o("input",{attrs:{type:"text",placeholder:e.searchPlaceholder},domProps:{value:e.query},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitQuery(t):null}}})]),e._v(" "),o("div",{staticClass:"right"},[e._l(e.loggedInNavLinks,function(t){return o("router-link",{key:t.linkName,staticClass:"link",attrs:{to:{name:t.linkName}}},[o("i",{class:t.linkIcon}),e._v(" "+e._s(t.linkName)+"\n      ")])}),e._v(" "),e.currentUser?e._e():o("router-link",{staticClass:"link",attrs:{to:{name:"Login"}}},[o("i",{staticClass:"navIcon fas fa-sign-in-alt"}),e._v(" Login\n      ")]),e._v(" "),e.currentUser?o("router-link",{staticClass:"link",attrs:{to:{name:"Profile"}}},[o("i",{staticClass:"navIcon fas fa-user"}),e._v(" Profile\n      ")]):e._e(),e._v(" "),e.currentUser?o("router-link",{staticClass:"link",attrs:{to:{name:"Publish"}}},[o("i",{staticClass:"navIcon fas fa-plus-square"}),e._v(" Publish\n      ")]):e._e(),e._v(" "),e.currentUser?o("router-link",{staticClass:"link",attrs:{to:{name:"Logout"}}},[o("i",{staticClass:"navIcon fas fa-sign-out-alt"}),e._v(" Logout\n      ")]):e._e()],2)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"toggle",attrs:{href:"#",id:"navHamburger"}},[t("i",{staticClass:"fas fa-bars"})])}]};var u={name:"App",data:function(){return{pageElements:[1,2,3]}},components:{Navigation:n("VU/8")(i,l,!1,function(e){n("+A8S")},"data-v-275fa64c",null).exports},computed:r()({},Object(s.b)({currentUser:"currentUser"}))},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Navigation",{attrs:{navItems:this.pageElements}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var p=n("VU/8")(u,c,!1,function(e){n("F1FX")},null,null).exports,d=n("/ocq"),v={name:"Homepage",computed:r()({},Object(s.b)({currentUser:"currentUser"})),data:function(){return{msg:"Welcome to Your Vue.js App"}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"homepage-wrapper"},[t("h1",[this._v("You're on the homepage")]),this._v(" "),this.currentUser?t("div",[this._v("\n    "+this._s(this.currentUser.email)+"\n  ")]):this._e()])},staticRenderFns:[]};var m=n("VU/8")(v,h,!1,function(e){n("TxQb")},"data-v-2f22a020",null).exports,f={name:"SearchResults",data:function(){return{query:null,results:[],gettingResults:!0}},beforeMount:function(){this.query=this.$route.params.query,this.getResults(this.query)},watch:{$route:function(e,t){console.log("watcher...")}},methods:{getResults:function(e){this.results=[],console.log(e)}}},g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Search results")])])}]};var _=n("VU/8")(f,g,!1,function(e){n("9CX6")},"data-v-3c656656",null).exports,b={name:"Login",data:function(){return{email:"",password:"",error:!1}},methods:{login:function(){var e=this;this.$http.post("/auth",{user:this.email,password:this.password}).then(function(t){return e.loginSuccessful(t)}).catch(function(){return e.loginFailed()})},loginSuccessful:function(e){e.data.token?(localStorage.token=e.data.token,this.$store.dispatch("login"),this.error=!1,this.$router.push({name:"SearchResults"})):this.loginFailed()},loginFailed:function(){this.error="Login failed!",this.$store.dispatch("logout"),delete localStorage.token}},computed:r()({},Object(s.b)({currentUser:"currentUser"}))},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Login")]),e._v(" "),e.error?n("div",[e._v(e._s(e.error))]):e._e(),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",placeholder:"Email address",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password",required:"",autofocus:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("button",{attrs:{type:"submit"}},[e._v("Login")])])])},staticRenderFns:[]};var k=n("VU/8")(b,y,!1,function(e){n("WDdP")},"data-v-9a494c52",null).exports,D=n("Gu7T"),S=n.n(D),C=n("mtWM"),P=n.n(C),U={name:"Categories",data:function(){return{categoryApiUrl:"https://open-devos-api.herokuapp.com/topics",categories:[]}},beforeMount:function(){this.getCategories()},methods:{getCategories:function(){var e=this;P.a.get(this.categoryApiUrl).then(function(t){var n;(n=e.categories).push.apply(n,S()(t.data.topics))}).catch(function(e){console.log(e)})}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Categories")]),e._v(" "),e._l(e.categories,function(t){return n("div",{key:t.id},[n("router-link",{staticClass:"link",attrs:{to:{name:"CategoryDetail",params:{category_slug:t.slug}}}},[e._v("\n      "+e._s(t.title)+"\n    ")])],1)})],2)},staticRenderFns:[]};var $=n("VU/8")(U,w,!1,function(e){n("P6HX")},"data-v-6a54cb3c",null).exports,R={name:"CategoryDetail",data:function(){return{categoryName:null,categorySlug:this.$route.params.category_slug,categoryApiUrl:"https://open-devos-api.herokuapp.com/topics",plans:[]}},beforeMount:function(){console.log("params...",this.$route.params),this.getCategoryPlans()},beforeRouteUpdate:function(e,t,n){this.categorySlug=this.$route.params.category_slug,n()},methods:{getCategoryPlans:function(){var e=this;P.a.get(this.categoryApiUrl+"/"+this.categorySlug).then(function(t){e.categoryName=t.data.topic.title,console.log(t)}).catch(function(e){console.log(e)})}}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v(this._s(this.categoryName))])])},staticRenderFns:[]};var T=n("VU/8")(R,N,!1,function(e){n("WNzL")},"data-v-a8e676ee",null).exports,F={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Popular")])])}]};var x=n("VU/8")({name:"Popular",data:function(){return{}}},F,!1,function(e){n("q7fG")},"data-v-276b4463",null).exports,I={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Profile")])])}]};var M=n("VU/8")({name:"Profile",data:function(){return{}}},I,!1,function(e){n("IcPj")},"data-v-4d0f0d33",null).exports,A={name:"Publish",data:function(){return{plans:[],showForm:!1,planTitle:null,selectedPlan:null,errorSubmittingForm:!1,planSubmittedSuccessfully:!1,responseMessage:null,errorDeletingPlan:!1,planDeletedSuccessfully:!1,planDeletionResponseMessage:null}},computed:r()({},Object(s.b)({currentUser:"currentUser"})),beforeMount:function(){this.getCurrentPlans()},methods:{deletePlan:function(e){var t=this,n=e.target.id,o=(n=n.split("-")).slice(2).join("-");P.a.delete("https://open-devos-api.herokuapp.com/plans/"+o,{headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(e){return t.errorDeletingPlan=!1,t.planDeletedSuccessfully=!0,t.plans=t.plans.filter(function(e){return e.slug!==o}),t.planDeletionResponseMessage="The plan was successfully deleted",e.data}).catch(function(e){console.log(e),t.planDeletionResponseMessage="There was an error deleting the devo",t.errorDeletingPlan=!0})},submitPlanForm:function(){var e=this;P.a.post("https://open-devos-api.herokuapp.com/plans",{plan:{title:this.planTitle,topic_id:1,user_id:this.currentUser.id}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){return e.errorSubmittingForm=!1,e.planSubmittedSuccessfully=!0,e.plans.push(t.data.plan),e.responseMessage="The plan was successfully created",t.data}).catch(function(t){console.log(t),e.responseMessage="There was an error submitting the form, please try again",e.errorSubmittingForm=!0})},formToggle:function(){console.log("Form toggle")},getCurrentPlans:function(){var e=this;P.a.get("https://open-devos-api.herokuapp.com/user-plans",{headers:{Authorization:"Bearer "+localStorage.getItem("token")},params:{user_id:1}}).then(function(t){var n;(n=e.plans).push.apply(n,S()(t.data.plans)),console.log(e.plans)}).catch(function(e){console.log("error: ",e)})}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Publish")]),e._v(" "),n("div",{staticClass:"published-plans-wrapper"},[n("button",{staticClass:"formToggleLink",on:{click:e.formToggle}},[e._v("New Plan")]),e._v(" "),n("h2",[e._v("Published Plans")]),e._v("\n    "+e._s(e.planDeletionResponseMessage)+"\n    "),e._l(e.plans,function(t){return n("div",{key:t.id},[n("router-link",{attrs:{to:{name:"PlanDetail",params:{plan_slug:t.slug}}}},[e._v("\n        "+e._s(t.title)+"\n      ")]),e._v(" "),n("div",[n("a",{attrs:{href:"#",id:"plan-delete-"+t.slug},on:{click:function(t){return t.preventDefault(),e.deletePlan(t)}}},[e._v("Delete")])])],1)})],2),e._v(" "),n("div",{staticClass:"plan-form-wrapper"},[n("h2",[e._v(e._s(e.responseMessage))]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.submitPlanForm(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.planTitle,expression:"planTitle"}],attrs:{type:"text",placeholder:"Title"},domProps:{value:e.planTitle},on:{input:function(t){t.target.composing||(e.planTitle=t.target.value)}}}),e._v(" "),n("button",[e._v("Save")])])])])},staticRenderFns:[]};var L=n("VU/8")(A,E,!1,function(e){n("Q0xd")},"data-v-0ced77d6",null).exports,q={name:"Logout",created:function(){delete localStorage.token,this.$store.dispatch("logout"),this.$router.push("/")}},O=n("VU/8")(q,null,!1,null,null,null).exports,j={name:"DevoForm",data:function(){return{devoTitle:"",devoContent:"",responseMessage:"",devoSubmittedSuccessfully:!1,errorSubmittingDevo:!1}},props:{planId:Number,devos:Array},computed:r()({},Object(s.b)({currentUser:"currentUser"})),methods:{submitDevoForm:function(){var e=this;P.a.post("https://open-devos-api.herokuapp.com/devos",{devo:{title:this.devoTitle,content:this.devoContent,position:5,plan_id:this.planId,status:0}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){return e.errorSubmittingDevo=!1,e.devoSubmittedSuccessfully=!0,e.responseMessage="Your devo has been published!",e.$emit("update",t.data.devo),t.data}).catch(function(t){console.log(t),e.responseMessage="There was an error submitting the form, make sure you filled out all required fields.",e.errorSubmittingDevo=!0})}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.devoSubmittedSuccessfully?n("div",[n("h2",[e._v(e._s(e.responseMessage))])]):e._e(),e._v(" "),e.devoSubmittedSuccessfully?e._e():n("div",[n("h2",[e._v("Add a Devo to the Plan")]),e._v(" "),e.errorSubmittingDevo?n("div",[n("h2",[e._v(e._s(e.responseMessage))])]):e._e(),e._v(" "),n("form",{staticClass:"form-wrapper",on:{submit:function(t){return t.preventDefault(),e.submitDevoForm(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.devoTitle,expression:"devoTitle"}],attrs:{type:"text",placeholder:"Title"},domProps:{value:e.devoTitle},on:{input:function(t){t.target.composing||(e.devoTitle=t.target.value)}}}),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.devoContent,expression:"devoContent"}],attrs:{name:"devoContent",cols:"30",rows:"10",placeholder:"Content"},domProps:{value:e.devoContent},on:{input:function(t){t.target.composing||(e.devoContent=t.target.value)}}}),e._v(" "),n("button",{attrs:{type:"submit"}},[e._v("Publish Devo")])])])])},staticRenderFns:[]};var z={name:"PlanDetail",data:function(){return{planName:null,planSlug:this.$route.params.plan_slug,planId:null,planApiUrl:"https://open-devos-api.herokuapp.com/plans",devos:[],errorDeletingDevo:!1,devoDeletedSuccessfully:!1,devoDeletionResponseMessage:null}},components:{DevoForm:n("VU/8")(j,V,!1,function(e){n("M41f")},"data-v-0b36b396",null).exports},beforeMount:function(){this.getPlanDetails()},beforeRouteUpdate:function(e,t,n){this.planSlug=this.$route.params.plan_slug,n()},computed:r()({},Object(s.b)({currentUser:"currentUser"})),methods:{syncDevos:function(e){this.devos.push(e)},deleteDevo:function(e){var t=this,n=e.target.id,o=(n=n.split("-")).slice(2).join("-");P.a.delete("https://open-devos-api.herokuapp.com/devos/"+e.target.id.slice(12),{headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(e){return t.errorDeletingDevo=!1,t.devoDeletedSuccessfully=!0,t.devos=t.devos.filter(function(e){return e.slug!==o}),t.devoDeletionResponseMessage="The devo was successfully deleted",e.data}).catch(function(e){console.log(e),t.devoDeletionResponseMessage="There was an error deleting the devo",t.errorDeletingDevo=!0})},getPlanDetails:function(){var e=this;P.a.get(this.planApiUrl+"/"+this.planSlug).then(function(t){var n;e.planName=t.data.plan.title,e.planId=t.data.plan.id,(n=e.devos).push.apply(n,S()(t.data.plan.devos))}).catch(function(e){console.log(e)})}}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.planName))]),e._v(" "),e._l(e.devos,function(t){return n("div",{key:t.slug},[n("router-link",{attrs:{to:{name:"DevoDetail",params:{devo_slug:t.slug}}}},[e._v("\n      "+e._s(t.title)+"\n    ")]),e._v(" "),n("a",{attrs:{href:"#",id:"devo-delete-"+t.slug},on:{click:function(t){return t.preventDefault(),e.deleteDevo(t)}}},[e._v("Delete")])],1)}),e._v(" "),n("div",{staticClass:"devo-form-wrapper"},[n("DevoForm",{attrs:{planId:e.planId,devos:e.devos},on:{update:e.syncDevos}})],1)],2)},staticRenderFns:[]};var W=n("VU/8")(z,H,!1,function(e){n("m7ko")},"data-v-f8c03b54",null).exports,X={name:"DevoDetail",data:function(){return{devoName:null,devoSlug:this.$route.params.devo_slug,devoApiUrl:"https://open-devos-api.herokuapp.com/devos",devoContent:null}},beforeMount:function(){console.log("params...",this.$route.params),this.getDevoDetails()},beforeRouteUpdate:function(e,t,n){this.devoSlug=this.$route.params.devo_slug,n()},methods:{getDevoDetails:function(){var e=this;P.a.get(this.devoApiUrl+"/"+this.devoSlug).then(function(t){e.devoName=t.data.devo.title,e.devoContent=t.data.devo.content,console.log(t)}).catch(function(e){console.log(e)})}}},B={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v(this._s(this.devoName))]),this._v(" "),t("div",[this._v("\n    "+this._s(this.devoContent)+"\n  ")])])},staticRenderFns:[]};var G=n("VU/8")(X,B,!1,function(e){n("XRJr")},"data-v-20595da5",null).exports;o.a.use(d.a);var Q=new d.a({mode:"history",routes:[{path:"/",name:"Homepage",component:m},{path:"/search-results",name:"SearchResults",component:_},{path:"/login",name:"Login",component:k},{path:"/logout",name:"Logout",component:O},{path:"/categories",name:"Categories",component:$},{path:"/category/:category_slug",name:"CategoryDetail",component:T},{path:"/plan/:plan_slug",name:"PlanDetail",component:W},{path:"/devo/:devo_slug",name:"DevoDetail",component:G},{path:"/popular",name:"Popular",component:x},{path:"/profile",name:"Profile",component:M},{path:"/publish",name:"Publish",component:L}]}),Y=n("Rf8U"),J=n.n(Y),Z=P.a.create({baseURL:"https://open-devos-api.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}});o.a.use(J.a,Z);var K,ee=n("bOdI"),te=n.n(ee),ne=n("Zrlr"),oe=n.n(ne),ae=n("wxAW"),re=n.n(ae),se=n("ytdl"),ie=n.n(se),le=function(){function e(t){var n=t.user_id,o=t.admin,a=t.email;oe()(this,e),this.id=n,this.admin=o,this.email=a}return re()(e,null,[{key:"from",value:function(t){try{return new e(ie()(t))}catch(e){return null}}}]),re()(e,[{key:"isAdmin",get:function(){return this.admin}}]),e}(),ue={state:{user:le.from(localStorage.token)},mutations:(K={},te()(K,"LOGIN",function(e){e.user=le.from(localStorage.token)}),te()(K,"LOGOUT",function(e){e.user=null}),K),getters:{currentUser:function(e){return e.user}},actions:{login:function(e){(0,e.commit)("LOGIN")},logout:function(e){(0,e.commit)("LOGOUT")}}};o.a.use(s.a);var ce=new s.a.Store({modules:{auth:ue}});o.a.config.productionTip=!1,new o.a({el:"#app",router:Q,axios:void 0,store:ce,components:{App:p},template:"<App/>"})},P6HX:function(e,t){},Q0xd:function(e,t){},TxQb:function(e,t){},WDdP:function(e,t){},WNzL:function(e,t){},XRJr:function(e,t){},m7ko:function(e,t){},q7fG:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e28c25a51bfeb7889e09.js.map